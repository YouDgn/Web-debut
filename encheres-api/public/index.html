<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>API EnchÃ¨res - Serveur Node.js</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div class="container">
    <h1>ğŸ¯ API EnchÃ¨res - Serveur Node.js + SQLite</h1>
    
    <div class="alert">
      âœ… Mode serveur activÃ© - API RESTful complÃ¨te avec base de donnÃ©es SQLite
    </div>
    
    <div id="status"></div>
    
  

    <!-- STATS -->
    <div class="stats">
      <div class="stat-card">
        <h3 id="statArticles">-</h3>
        <p>Articles</p>
      </div>
      <div class="stat-card">
        <h3 id="statImages">-</h3>
        <p>Images</p>
      </div>
    </div>
    
    <!-- AUTHENTIFICATION -->
    <div class="card" id="authSection">
      <h2>ğŸ” Authentification</h2>
      
      <div id="loginForm">
        <div class="form-group">
          <label>Email :</label>
          <input type="email" id="loginEmail" placeholder="alice@test.com" value="alice@test.com">
        </div>
        
        <div class="form-group">
          <label>Mot de passe :</label>
          <input type="password" id="loginPassword" placeholder="password123" value="password123">
        </div>
        
        <button onclick="login()">Se connecter</button>
      </div>
      
      <div id="userInfo" class="user-info hidden">
        <p><strong>ConnectÃ© en tant que :</strong> <span id="userName"></span></p>
        <p><strong>Email :</strong> <span id="userEmail"></span></p>
        <p><strong>Token JWT :</strong> <code id="userToken" style="font-size: 0.7em; word-break: break-all;"></code></p>
        <button class="btn-danger" onclick="logout()">Se dÃ©connecter</button>
      </div>
    </div>
    
    <!-- ARTICLES -->
<div class="card hidden" id="articlesSection">
  <h2>ğŸ“¦ Gestion des Articles</h2>
  
  <h3>CrÃ©er un article</h3>
  <div class="form-group">
    <label>Titre :</label>
    <input type="text" id="articleTitle" placeholder="iPhone 14 Pro">
  </div>
  
  <div class="form-group">
    <label>Description :</label>
    <textarea id="articleDescription" placeholder="Description dÃ©taillÃ©e..."></textarea>
  </div>
  
  <div class="form-group">
    <label>Prix de dÃ©part (â‚¬) :</label>
    <input type="number" id="articlePrice" placeholder="100" min="0" step="0.01">
  </div>

  <!-- NOUVEAU : Champ pour l'image -->
  <div class="form-group">
    <label>Image (optionnel) :</label>
    <input type="file" id="articleImageCreate" accept="image/*">
  </div>
  
  <button onclick="createArticle()">CrÃ©er l'article</button>
  
  <hr>
  
  <h3>Liste des articles</h3>
  <button class="btn-success" onclick="getAllArticles()">Tous les articles</button>
  <button class="btn-success" onclick="getMyArticles()">Mes articles</button>
  
  <div id="articlesList"></div>
</div>
    
    <!-- IMAGES -->
    <div class="card hidden" id="imagesSection">
      <h2>ğŸ–¼ï¸ Gestion des Images</h2>
      
      <div class="form-group">
        <label>ID de l'article :</label>
        <input type="number" id="imageArticleId" placeholder="1" min="1">
      </div>
      
      <div class="form-group">
        <label>SÃ©lectionner une image :</label>
        <input type="file" id="imageFile" accept="image/*">
      </div>
      
      <button onclick="uploadImage()">Uploader l'image</button>
      
      <hr>
      
      <h3>Voir les images d'un article</h3>
      <div class="form-group">
        <label>ID de l'article :</label>
        <input type="number" id="viewImageArticleId" placeholder="1" min="1">
      </div>
      
      <button class="btn-success" onclick="getArticleImages()">Afficher les images</button>
      
      <div id="imagesList"></div>
    </div>
    
    <!-- RÃ‰PONSE API -->
    <div class="card">
      <h2>ğŸ“¡ DerniÃ¨re rÃ©ponse de l'API</h2>
      <pre id="apiResponse">Aucune requÃªte effectuÃ©e</pre>
    </div>
  </div>

  <!-- SÃ‰CURITÃ‰ - HASHAGE DES MOTS DE PASSE -->
<div class="card">
  <h2>ğŸ” SÃ©curitÃ© - Hashage des mots de passe</h2>
  <p style="margin-bottom: 15px;">
    Les mots de passe sont hashÃ©s avec <strong>bcrypt</strong> avant d'Ãªtre stockÃ©s en base de donnÃ©es.
  </p>
  
  <button class="btn-success" onclick="showPasswordHashes()">Voir les mots de passe hashÃ©s</button>
  <button class="btn-warning" onclick="testPasswordHash()">Tester le hashage</button>
  
  <pre id="hashDisplay" style="margin-top: 15px; display: none;">Cliquez sur un bouton</pre>
</div>

  <!-- Script JavaScript externe -->
  <script src="js/app.js"></script>
</body>
</html>