<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>API Ench√®res - Mode Local (Sans Serveur)</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }
    
    h1 {
      color: white;
      text-align: center;
      margin-bottom: 30px;
      font-size: 2.5em;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }
    
    .alert {
      background: #fff3cd;
      border: 2px solid #ffc107;
      color: #856404;
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 20px;
      text-align: center;
      font-weight: bold;
    }
    
    .card {
      background: white;
      border-radius: 15px;
      padding: 25px;
      margin-bottom: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }
    
    .card h2 {
      color: #667eea;
      margin-bottom: 15px;
      border-bottom: 3px solid #667eea;
      padding-bottom: 10px;
    }

    .card h3 {
      color: #333;
      margin-top: 20px;
      margin-bottom: 10px;
    }
    
    .form-group {
      margin-bottom: 15px;
    }
    
    label {
      display: block;
      font-weight: bold;
      margin-bottom: 5px;
      color: #333;
    }
    
    input, textarea, select {
      width: 100%;
      padding: 10px;
      border: 2px solid #ddd;
      border-radius: 8px;
      font-size: 14px;
      transition: border-color 0.3s;
    }
    
    input:focus, textarea:focus, select:focus {
      outline: none;
      border-color: #667eea;
    }
    
    textarea {
      resize: vertical;
      min-height: 80px;
    }
    
    button {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 12px 25px;
      border-radius: 8px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
      margin-right: 10px;
      margin-top: 10px;
    }
    
    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
    }
    
    button:active {
      transform: translateY(0);
    }
    
    .btn-danger {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    }
    
    .btn-success {
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
    }
    
    .btn-warning {
      background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
    }
    
    #status {
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
      font-weight: bold;
      display: none;
    }
    
    #status.success {
      background: #d4edda;
      color: #155724;
      border: 2px solid #c3e6cb;
      display: block;
    }
    
    #status.error {
      background: #f8d7da;
      color: #721c24;
      border: 2px solid #f5c6cb;
      display: block;
    }
    
    #status.info {
      background: #d1ecf1;
      color: #0c5460;
      border: 2px solid #bee5eb;
      display: block;
    }
    
    .user-info {
      background: #f8f9fa;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 15px;
    }
    
    .hidden {
      display: none !important;
    }
    
    .article-item {
      background: #f8f9fa;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 10px;
      border-left: 4px solid #667eea;
      position: relative;
    }
    
    .article-item h3 {
      color: #333;
      margin-bottom: 8px;
      margin-top: 0;
    }
    
    .article-item p {
      color: #666;
      margin-bottom: 5px;
    }
    
    .article-item .price {
      color: #28a745;
      font-weight: bold;
      font-size: 1.2em;
    }
    
    .article-actions {
      margin-top: 10px;
    }
    
    .image-gallery {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 10px;
      margin-top: 10px;
    }
    
    .image-gallery img {
      width: 100%;
      height: 150px;
      object-fit: cover;
      border-radius: 8px;
      cursor: pointer;
      transition: transform 0.2s;
    }
    
    .image-gallery img:hover {
      transform: scale(1.05);
    }
    
    pre {
      background: #2d3748;
      color: #68d391;
      padding: 15px;
      border-radius: 8px;
      overflow-x: auto;
      font-size: 13px;
      max-height: 400px;
      overflow-y: auto;
    }

    .stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-bottom: 20px;
    }

    .stat-card {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 20px;
      border-radius: 10px;
      text-align: center;
    }

    .stat-card h3 {
      font-size: 2em;
      margin-bottom: 5px;
      color: white;
      margin-top: 0;
    }

    .stat-card p {
      opacity: 0.9;
    }

    hr {
      margin: 30px 0;
      border: none;
      border-top: 2px solid #eee;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üéØ API Ench√®res - Mode Local (Sans Serveur)</h1>
    
    <div class="alert">
      ‚ö†Ô∏è Mode d√©monstration local - Les donn√©es sont stock√©es dans votre navigateur
    </div>
    
    <div id="status"></div>
    
    <!-- STATISTIQUES -->
    <div class="stats">
      <div class="stat-card">
        <h3 id="statUsers">3</h3>
        <p>Utilisateurs</p>
      </div>
      <div class="stat-card">
        <h3 id="statArticles">0</h3>
        <p>Articles</p>
      </div>
      <div class="stat-card">
        <h3 id="statImages">0</h3>
        <p>Images</p>
      </div>
    </div>
    
    <!-- SECTION AUTHENTIFICATION -->
    <div class="card" id="authSection">
      <h2>üîê Authentification</h2>
      
      <div id="loginForm">
        <div class="form-group">
          <label>S√©lectionner un utilisateur :</label>
          <select id="userSelect">
            <option value="">-- Choisir --</option>
            <option value="alice@test.com">Alice (alice@test.com)</option>
            <option value="bob@test.com">Bob (bob@test.com)</option>
            <option value="charlie@test.com">Charlie (charlie@test.com)</option>
          </select>
        </div>
        
        <div class="form-group">
          <label>Mot de passe :</label>
          <input type="password" id="loginPassword" placeholder="password123" value="password123">
        </div>
        
        <button onclick="login()">Se connecter</button>
      </div>
      
      <div id="userInfo" class="user-info hidden">
        <p><strong>Connect√© en tant que :</strong> <span id="userName"></span></p>
        <p><strong>Email :</strong> <span id="userEmail"></span></p>
        <p><strong>ID :</strong> <span id="userId"></span></p>
        <button class="btn-danger" onclick="logout()">Se d√©connecter</button>
        <button class="btn-warning" onclick="resetDatabase()">R√©initialiser la BDD</button>
      </div>
    </div>
    
    <!-- SECTION ARTICLES -->
    <div class="card hidden" id="articlesSection">
      <h2>üì¶ Gestion des Articles</h2>
      
      <h3>Cr√©er un article</h3>
      <div class="form-group">
        <label>Titre :</label>
        <input type="text" id="articleTitle" placeholder="iPhone 14 Pro">
      </div>
      
      <div class="form-group">
        <label>Description :</label>
        <textarea id="articleDescription" placeholder="Description d√©taill√©e de l'article..."></textarea>
      </div>
      
      <div class="form-group">
        <label>Prix de d√©part (‚Ç¨) :</label>
        <input type="number" id="articlePrice" placeholder="100" min="0" step="0.01">
      </div>

      <div class="form-group">
        <label>Image de l'article (optionnel) :</label>
        <input type="file" id="articleImage" accept="image/*">
      </div>
      
      <button onclick="createArticle()">Cr√©er l'article</button>
      
      <hr>
      
      <h3>Liste des articles</h3>
      <button class="btn-success" onclick="getAllArticles()">Afficher tous les articles</button>
      <button class="btn-success" onclick="getMyArticles()">Mes articles uniquement</button>
      
      <div id="articlesList" style="margin-top: 20px;"></div>
    </div>
    
    <!-- SECTION IMAGES -->
    <div class="card hidden" id="imagesSection">
      <h2>üñºÔ∏è Gestion des Images</h2>
      
      <div class="form-group">
        <label>ID de l'article :</label>
        <input type="number" id="imageArticleId" placeholder="1" min="1">
      </div>
      
      <div class="form-group">
        <label>S√©lectionner une image :</label>
        <input type="file" id="imageFile" accept="image/*">
      </div>
      
      <button onclick="uploadImage()">Uploader l'image</button>
      
      <hr>
      
      <h3>Voir les images d'un article</h3>
      <div class="form-group">
        <label>ID de l'article :</label>
        <input type="number" id="viewImageArticleId" placeholder="1" min="1">
      </div>
      
      <button class="btn-success" onclick="getArticleImages()">Afficher les images</button>
      
      <div id="imagesList" style="margin-top: 20px;"></div>
    </div>
    
    <!-- SECTION DONN√âES -->
    <div class="card">
      <h2>üíæ Donn√©es en m√©moire</h2>
      <button class="btn-success" onclick="showAllData()">Afficher toutes les donn√©es</button>
      <pre id="dataDisplay">Cliquez sur le bouton pour voir les donn√©es</pre>
    </div>
    
    <!-- SECTION LOGS -->
    <div class="card">
      <h2>üì° Journal d'activit√©</h2>
      <button class="btn-warning" onclick="clearLogs()">Effacer les logs</button>
      <pre id="logs">Aucune activit√©</pre>
    </div>
  </div>

  <script>
    // ====================
    // BASE DE DONN√âES LOCALE
    // ====================
    
    // Initialiser la base de donn√©es locale
    function initDatabase() {
      if (!localStorage.getItem('users')) {
        const users = [
          { id: 1, username: 'alice', email: 'alice@test.com', password: 'password123' },
          { id: 2, username: 'bob', email: 'bob@test.com', password: 'password123' },
          { id: 3, username: 'charlie', email: 'charlie@test.com', password: 'password123' }
        ];
        localStorage.setItem('users', JSON.stringify(users));
      }
      
      if (!localStorage.getItem('articles')) {
        localStorage.setItem('articles', JSON.stringify([]));
      }
      
      if (!localStorage.getItem('images')) {
        localStorage.setItem('images', JSON.stringify([]));
      }
      
      if (!localStorage.getItem('logs')) {
        localStorage.setItem('logs', JSON.stringify([]));
      }
      
      updateStats();
    }
    
    // R√©initialiser la base de donn√©es
    function resetDatabase() {
      if (confirm('‚ö†Ô∏è Voulez-vous vraiment supprimer tous les articles et images ?')) {
        localStorage.setItem('articles', JSON.stringify([]));
        localStorage.setItem('images', JSON.stringify([]));
        addLog('üîÑ Base de donn√©es r√©initialis√©e');
        showStatus('‚úÖ Base de donn√©es r√©initialis√©e', 'success');
        document.getElementById('articlesList').innerHTML = '';
        document.getElementById('imagesList').innerHTML = '';
        updateStats();
      }
    }
    
    // Variables globales
    let currentUser = null;
    
    // Fonction pour afficher les messages
    function showStatus(message, type = 'info') {
      const status = document.getElementById('status');
      status.textContent = message;
      status.className = type;
      status.style.display = 'block';
      setTimeout(() => {
        status.style.display = 'none';
      }, 5000);
    }
    
    // Ajouter un log
    function addLog(message) {
      const logs = JSON.parse(localStorage.getItem('logs') || '[]');
      const timestamp = new Date().toLocaleString('fr-FR');
      logs.unshift(`[${timestamp}] ${message}`);
      if (logs.length > 50) logs.pop();
      localStorage.setItem('logs', JSON.stringify(logs));
      updateLogs();
    }
    
    // Mettre √† jour l'affichage des logs
    function updateLogs() {
      const logs = JSON.parse(localStorage.getItem('logs') || '[]');
      document.getElementById('logs').textContent = logs.length > 0 
        ? logs.join('\n') 
        : 'Aucune activit√©';
    }
    
    // Effacer les logs
    function clearLogs() {
      localStorage.setItem('logs', JSON.stringify([]));
      updateLogs();
      showStatus('üóëÔ∏è Logs effac√©s', 'info');
    }
    
    // Mettre √† jour les statistiques
    function updateStats() {
      const users = JSON.parse(localStorage.getItem('users') || '[]');
      const articles = JSON.parse(localStorage.getItem('articles') || '[]');
      const images = JSON.parse(localStorage.getItem('images') || '[]');
      
      document.getElementById('statUsers').textContent = users.length;
      document.getElementById('statArticles').textContent = articles.length;
      document.getElementById('statImages').textContent = images.length;
    }
    
    // Afficher toutes les donn√©es
    function showAllData() {
      const data = {
        users: JSON.parse(localStorage.getItem('users') || '[]').map(u => ({...u, password: '***'})),
        articles: JSON.parse(localStorage.getItem('articles') || '[]'),
        images: JSON.parse(localStorage.getItem('images') || '[]').map(img => ({...img, data: '[BASE64_DATA]'}))
      };
      document.getElementById('dataDisplay').textContent = JSON.stringify(data, null, 2);
    }
    
    // ====================
    // AUTHENTIFICATION
    // ====================
    
    function login() {
      const email = document.getElementById('userSelect').value;
      const password = document.getElementById('loginPassword').value;
      
      if (!email) {
        showStatus('‚ö†Ô∏è Veuillez s√©lectionner un utilisateur', 'error');
        return;
      }
      
      const users = JSON.parse(localStorage.getItem('users'));
      const user = users.find(u => u.email === email);
      
      if (!user) {
        showStatus('‚ùå Utilisateur non trouv√©', 'error');
        addLog(`‚ùå Tentative de connexion √©chou√©e : ${email}`);
        return;
      }
      
      if (user.password !== password) {
        showStatus('‚ùå Mot de passe incorrect', 'error');
        addLog(`‚ùå Mot de passe incorrect pour : ${email}`);
        return;
      }
      
      currentUser = user;
      
      document.getElementById('userName').textContent = user.username;
      document.getElementById('userEmail').textContent = user.email;
      document.getElementById('userId').textContent = user.id;
      
      document.getElementById('loginForm').classList.add('hidden');
      document.getElementById('userInfo').classList.remove('hidden');
      document.getElementById('articlesSection').classList.remove('hidden');
      document.getElementById('imagesSection').classList.remove('hidden');
      
      showStatus(`‚úÖ Connect√© en tant que ${user.username}`, 'success');
      addLog(`‚úÖ Connexion r√©ussie : ${user.username} (${user.email})`);
      
      getAllArticles();
    }
    
    function logout() {
      addLog(`üëã D√©connexion de ${currentUser.username}`);
      currentUser = null;
      
      document.getElementById('loginForm').classList.remove('hidden');
      document.getElementById('userInfo').classList.add('hidden');
      document.getElementById('articlesSection').classList.add('hidden');
      document.getElementById('imagesSection').classList.add('hidden');
      
      document.getElementById('articlesList').innerHTML = '';
      document.getElementById('imagesList').innerHTML = '';
      
      showStatus('üëã D√©connexion r√©ussie', 'info');
    }
    
    // ====================
    // GESTION DES ARTICLES
    // ====================
    
    function createArticle() {
      const title = document.getElementById('articleTitle').value.trim();
      const description = document.getElementById('articleDescription').value.trim();
      const prix_depart = parseFloat(document.getElementById('articlePrice').value);
      const imageInput = document.getElementById('articleImage');
      
      // Validation
      if (!title || title.length < 3) {
        showStatus('‚ö†Ô∏è Le titre doit contenir au moins 3 caract√®res', 'error');
        return;
      }
      
      if (!description || description.length < 10) {
        showStatus('‚ö†Ô∏è La description doit contenir au moins 10 caract√®res', 'error');
        return;
      }
      
      if (!prix_depart || prix_depart <= 0) {
        showStatus('‚ö†Ô∏è Le prix doit √™tre sup√©rieur √† 0', 'error');
        return;
      }
      
      const articles = JSON.parse(localStorage.getItem('articles'));
      const newArticle = {
        id: articles.length > 0 ? Math.max(...articles.map(a => a.id)) + 1 : 1,
        title,
        description,
        prix_depart,
        user_id: currentUser.id,
        author: currentUser.username,
        created_at: new Date().toISOString()
      };
      
      articles.push(newArticle);
      localStorage.setItem('articles', JSON.stringify(articles));
      
      // Si une image est s√©lectionn√©e, l'uploader
      if (imageInput.files && imageInput.files[0]) {
        const file = imageInput.files[0];
        const reader = new FileReader();
        
        reader.onload = function(e) {
          const images = JSON.parse(localStorage.getItem('images'));
          const newImage = {
            id: images.length > 0 ? Math.max(...images.map(img => img.id)) + 1 : 1,
            article_id: newArticle.id,
            filename: file.name,
            data: e.target.result,
            uploaded_at: new Date().toISOString()
          };
          
          images.push(newImage);
          localStorage.setItem('images', JSON.stringify(images));
          
          showStatus(`‚úÖ Article "${title}" cr√©√© avec image !`, 'success');
          addLog(`üì¶ Article cr√©√© : "${title}" avec image par ${currentUser.username}`);
          updateStats();
        };
        
        reader.readAsDataURL(file);
      } else {
        showStatus(`‚úÖ Article "${title}" cr√©√© avec succ√®s !`, 'success');
        addLog(`üì¶ Article cr√©√© : "${title}" par ${currentUser.username}`);
      }
      
      // Vider les champs
      document.getElementById('articleTitle').value = '';
      document.getElementById('articleDescription').value = '';
      document.getElementById('articlePrice').value = '';
      document.getElementById('articleImage').value = '';
      
      // Rafra√Æchir l'affichage
      setTimeout(() => {
        getAllArticles();
        updateStats();
      }, 100);
    }
    
    function getAllArticles() {
      const articles = JSON.parse(localStorage.getItem('articles') || '[]');
      displayArticles(articles);
      addLog(`üìã Affichage de ${articles.length} article(s)`);
      showStatus(`üì¶ ${articles.length} article(s) trouv√©(s)`, 'info');
    }
    
    function getMyArticles() {
      const articles = JSON.parse(localStorage.getItem('articles') || '[]');
      const myArticles = articles.filter(a => a.user_id === currentUser.id);
      displayArticles(myArticles);
      addLog(`üìã Affichage de ${myArticles.length} article(s) de ${currentUser.username}`);
      showStatus(`üì¶ ${myArticles.length} de vos article(s)`, 'info');
    }
    
    function displayArticles(articles) {
      const container = document.getElementById('articlesList');
      
      if (articles.length === 0) {
        container.innerHTML = '<p style="color: #999; padding: 20px; text-align: center;">Aucun article trouv√©</p>';
        return;
      }
      
      container.innerHTML = articles.map(article => {
        const images = JSON.parse(localStorage.getItem('images')).filter(img => img.article_id === article.id);
        const isMine = currentUser && article.user_id === currentUser.id;
        
        return `
          <div class="article-item">
            <h3>${article.title}</h3>
            <p>${article.description}</p>
            <p class="price">Prix de d√©part : ${article.prix_depart.toFixed(2)} ‚Ç¨</p>
            <p style="font-size: 0.9em; color: #999;">
              Auteur : ${article.author} | 
              ID : ${article.id} |
              Cr√©√© le : ${new Date(article.created_at).toLocaleDateString('fr-FR')}
            </p>
            ${images.length > 0 ? `
              <div class="image-gallery" style="margin-top: 10px;">
                ${images.map(img => `
                  <img src="${img.data}" alt="${img.filename}" title="${img.filename}" onclick="viewImageFullscreen('${img.data}')">
                `).join('')}
              </div>
              <p style="font-size: 0.9em; color: #28a745; margin-top: 5px;">üñºÔ∏è ${images.length} image(s)</p>
            ` : '<p style="font-size: 0.9em; color: #999;">Aucune image</p>'}
            ${isMine ? `
              <div class="article-actions">
                <button class="btn-danger" onclick="deleteArticle(${article.id})">Supprimer</button>
              </div>
            ` : ''}
          </div>
        `;
      }).join('');
    }
    
    function deleteArticle(articleId) {
      if (!confirm('Voulez-vous vraiment supprimer cet article ?')) return;
      
      let articles = JSON.parse(localStorage.getItem('articles'));
      const article = articles.find(a => a.id === articleId);
      
      if (!article) {
        showStatus('‚ùå Article non trouv√©', 'error');
        return;
      }
      
      if (article.user_id !== currentUser.id) {
        showStatus('‚ùå Vous n\'√™tes pas autoris√© √† supprimer cet article', 'error');
        return;
      }
      
      // Supprimer l'article
      articles = articles.filter(a => a.id !== articleId);
      localStorage.setItem('articles', JSON.stringify(articles));
      
      // Supprimer les images associ√©es
      let images = JSON.parse(localStorage.getItem('images'));
      images = images.filter(img => img.article_id !== articleId);
      localStorage.setItem('images', JSON.stringify(images));
      
      showStatus('‚úÖ Article supprim√©', 'success');
      addLog(`üóëÔ∏è Article supprim√© : "${article.title}"`);
      
      getAllArticles();
      updateStats();
    }
    
    // ====================
    // GESTION DES IMAGES
    // ====================
    
    function uploadImage() {
      const articleId = parseInt(document.getElementById('imageArticleId').value);
      const fileInput = document.getElementById('imageFile');
      
      if (!articleId) {
        showStatus('‚ö†Ô∏è Veuillez entrer un ID d\'article', 'error');
        return;
      }
      
      if (!fileInput.files || !fileInput.files[0]) {
        showStatus('‚ö†Ô∏è Veuillez s√©lectionner une image', 'error');
        return;
      }
      
      const articles = JSON.parse(localStorage.getItem('articles'));
      const article = articles.find(a => a.id === articleId);
      
      if (!article) {
        showStatus('‚ùå Article non trouv√©', 'error');
        return;
      }
      
      if (article.user_id !== currentUser.id) {
        showStatus('‚ùå Seul le propri√©taire peut ajouter des images', 'error');
        return;
      }
      
      const file = fileInput.files[0];
      const reader = new FileReader();
      
      reader.onload = function(e) {
        const images = JSON.parse(localStorage.getItem('images'));
        const newImage = {
          id: images.length > 0 ? Math.max(...images.map(img => img.id)) + 1 : 1,
          article_id: articleId,
          filename: file.name,
          data: e.target.result,
          uploaded_at: new Date().toISOString()
        };
        
        images.push(newImage);
        localStorage.setItem('images', JSON.stringify(images));
        
        fileInput.value = '';
        showStatus(`‚úÖ Image "${file.name}" upload√©e avec succ√®s !`, 'success');
        addLog(`üñºÔ∏è Image upload√©e : "${file.name}" pour l'article #${articleId}`);
        updateStats();
        getAllArticles(); // Rafra√Æchir pour montrer l'image
      };
      
      reader.readAsDataURL(file);
    }
    
    function getArticleImages() {
      const articleId = parseInt(document.getElementById('viewImageArticleId').value);
      
      if (!articleId) {
        showStatus('‚ö†Ô∏è Veuillez entrer un ID d\'article', 'error');
        return;
      }
      
      const articles = JSON.parse(localStorage.getItem('articles'));
      const article = articles.find(a => a.id === articleId);
      
      if (!article) {
        showStatus('‚ùå Article non trouv√©', 'error');
        return;
      }
      
      const images = JSON.parse(localStorage.getItem('images')).filter(img => img.article_id === articleId);
      displayImages(images, article);
      addLog(`üñºÔ∏è Affichage de ${images.length} image(s) de l'article #${articleId}`);
    }
    
    function displayImages(images, article) {
      const container = document.getElementById('imagesList');
      
      if (images.length === 0) {
        container.innerHTML = '<p style="color: #999; padding: 20px; text-align: center;">Aucune image trouv√©e pour cet article</p>';
        return;
      }
      
      container.innerHTML = `
        <div class="article-item">
          <h3>Images de l'article : ${article.title}</h3>
          <div class="image-gallery">
            ${images.map(image => `
              <div>
                <img src="${image.data}" alt="${image.filename}" onclick="viewImageFullscreen('${image.data}')">
                <p style="font-size: 0.8em; color: #999; margin-top: 5px; text-align: center;">${image.filename}</p>
              </div>
            `).join('')}
          </div>
        </div>
        `;}
    
    function viewImageFullscreen(dataUrl) {
      const win = window.open('', '_blank');
      win.document.write(`
        <!DOCTYPE html>
        <html>
        <head>
          <title>Image en plein √©cran</title>
          <style>
            body {
              margin: 0;
              padding: 20px;
              background: #000;
              display: flex;
              justify-content: center;
              align-items: center;
              min-height: 100vh;
            }
            img {
              max-width: 100%;
              max-height: 100vh;
              object-fit: contain;
            }
          </style>
        </head>
        <body>
          <img src="${dataUrl}" alt="Image">
        </body>
        </html>
      `);
    }
    
    // ====================
    // INITIALISATION
    // ====================
    
    // Initialiser au chargement de la page
    window.onload = function() {
      initDatabase();
      updateLogs();
      addLog('üöÄ Application d√©marr√©e en mode local');
      console.log('‚úÖ Application charg√©e avec succ√®s');
    };
  </script>
</body>
</html>